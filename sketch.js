// Generated by CoffeeScript 2.7.0
var S, draw, mouseReleased, setup, startNewGame, touchEnded, touchStarted, touching;

touching = false;

touchStarted = function() {
  touching = true;
  return false;
};

touchEnded = function() {
  touching = false;
  return false;
};

mouseReleased = function() {
  return touching = false;
};

S = {
  x: 0,
  y: 0,
  level: 0,
  d: 50,
  stars: []
};

startNewGame = function(dlevel, rand = false) {
  if (rand) {
    S.stars = range(height * width / S.d / S.d).map(function(i) {
      return [width * random(), height * random()];
    });
  }
  return Object.assign(S, {
    level: S.level + dlevel,
    x: 0,
    y: height / 2
  });
};

draw = function() {
  var j, k, len, len1, ref, ref1, ref2, x, y;
  bg(0.5);
  fill('red');
  sc();
  text(S.level, width / 2, height / 2);
  fill('yellow');
  ref = S.stars;
  for (j = 0, len = ref.length; j < len; j++) {
    [x, y] = ref[j];
    circle(x, y, S.level);
  }
  rect(width - 3, 0.4 * height, 2, 0.2 * height);
  if (mouseIsPressed && 0.1 * height > dist(mouseX, mouseY, 0, 0)) {
    startNewGame(0, true);
  }
  [S.x, S.y] = [S.x + 1, S.y + (mouseIsPressed || keyIsDown(32) ? 1 : -1)];
  sc(0);
  line(S.x, S.y, S.x + 500, S.y + 500);
  line(S.x, S.y, S.x + 500, S.y - 500);
  if (S.x > width && (0.4 * height < (ref1 = S.y) && ref1 < 0.6 * height)) {
    return startNewGame(1, true);
  }
  if (S.y < 0 || S.y > height || S.x > width) {
    return startNewGame(0, false);
  }
  ref2 = S.stars;
  for (k = 0, len1 = ref2.length; k < len1; k++) {
    [x, y] = ref2[k];
    if (S.level > dist(S.x, S.y, x, y)) {
      return startNewGame(0, false);
    }
  }
};

setup = function() {
  createCanvas(windowWidth, windowHeight);
  textAlign(CENTER, CENTER);
  textSize(height);
  return startNewGame(1, true);
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6IlxcIiwic291cmNlcyI6WyJza2V0Y2guY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxJQUFBLENBQUEsRUFBQSxJQUFBLEVBQUEsYUFBQSxFQUFBLEtBQUEsRUFBQSxZQUFBLEVBQUEsVUFBQSxFQUFBLFlBQUEsRUFBQTs7QUFBQSxRQUFBLEdBQVc7O0FBQ1gsWUFBQSxHQUFlLFFBQUEsQ0FBQSxDQUFBO0VBQUcsUUFBQSxHQUFXO1NBQU07QUFBcEI7O0FBQ2YsVUFBQSxHQUFhLFFBQUEsQ0FBQSxDQUFBO0VBQUcsUUFBQSxHQUFXO1NBQU87QUFBckI7O0FBQ2IsYUFBQSxHQUFnQixRQUFBLENBQUEsQ0FBQTtTQUFHLFFBQUEsR0FBVztBQUFkOztBQUVoQixDQUFBLEdBQUk7RUFBQyxDQUFBLEVBQUUsQ0FBSDtFQUFNLENBQUEsRUFBRSxDQUFSO0VBQVcsS0FBQSxFQUFNLENBQWpCO0VBQW9CLENBQUEsRUFBRSxFQUF0QjtFQUEwQixLQUFBLEVBQU07QUFBaEM7O0FBRUosWUFBQSxHQUFlLFFBQUEsQ0FBQyxNQUFELEVBQVMsT0FBTyxLQUFoQixDQUFBO0VBQ2QsSUFBRyxJQUFIO0lBQWEsQ0FBQyxDQUFDLEtBQUYsR0FBVSxLQUFBLENBQU0sTUFBQSxHQUFPLEtBQVAsR0FBYSxDQUFDLENBQUMsQ0FBZixHQUFpQixDQUFDLENBQUMsQ0FBekIsQ0FBMkIsQ0FBQyxHQUE1QixDQUFnQyxRQUFBLENBQUMsQ0FBRCxDQUFBO2FBQU8sQ0FBQyxLQUFBLEdBQU0sTUFBQSxDQUFBLENBQVAsRUFBaUIsTUFBQSxHQUFPLE1BQUEsQ0FBQSxDQUF4QjtJQUFQLENBQWhDLEVBQXZCOztTQUNBLE1BQU0sQ0FBQyxNQUFQLENBQWMsQ0FBZCxFQUFnQjtJQUFDLEtBQUEsRUFBTSxDQUFDLENBQUMsS0FBRixHQUFRLE1BQWY7SUFBdUIsQ0FBQSxFQUFFLENBQXpCO0lBQTRCLENBQUEsRUFBRSxNQUFBLEdBQU87RUFBckMsQ0FBaEI7QUFGYzs7QUFJZixJQUFBLEdBQU8sUUFBQSxDQUFBLENBQUE7QUFDUCxNQUFBLENBQUEsRUFBQSxDQUFBLEVBQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxHQUFBLEVBQUEsSUFBQSxFQUFBLElBQUEsRUFBQSxDQUFBLEVBQUE7RUFBQyxFQUFBLENBQUcsR0FBSDtFQUVBLElBQUEsQ0FBSyxLQUFMO0VBQ0EsRUFBQSxDQUFBO0VBQ0EsSUFBQSxDQUFLLENBQUMsQ0FBQyxLQUFQLEVBQWMsS0FBQSxHQUFNLENBQXBCLEVBQXVCLE1BQUEsR0FBTyxDQUE5QjtFQUVBLElBQUEsQ0FBSyxRQUFMO0FBQ0E7RUFBQSxLQUFBLHFDQUFBO0lBQXVCLENBQUMsQ0FBRCxFQUFHLENBQUg7SUFBdkIsTUFBQSxDQUFPLENBQVAsRUFBUyxDQUFULEVBQVcsQ0FBQyxDQUFDLEtBQWI7RUFBQTtFQUVBLElBQUEsQ0FBSyxLQUFBLEdBQU0sQ0FBWCxFQUFhLEdBQUEsR0FBSSxNQUFqQixFQUF3QixDQUF4QixFQUEwQixHQUFBLEdBQUksTUFBOUI7RUFFQSxJQUFHLGNBQUEsSUFBbUIsR0FBQSxHQUFJLE1BQUosR0FBYSxJQUFBLENBQUssTUFBTCxFQUFZLE1BQVosRUFBb0IsQ0FBcEIsRUFBc0IsQ0FBdEIsQ0FBbkM7SUFBZ0UsWUFBQSxDQUFhLENBQWIsRUFBZSxJQUFmLEVBQWhFOztFQUVBLENBQUMsQ0FBQyxDQUFDLENBQUgsRUFBSyxDQUFDLENBQUMsQ0FBUCxDQUFBLEdBQVksQ0FBQyxDQUFDLENBQUMsQ0FBRixHQUFJLENBQUwsRUFBUSxDQUFDLENBQUMsQ0FBRixHQUFNLENBQUcsY0FBQSxJQUFrQixTQUFBLENBQVUsRUFBVixDQUFyQixHQUF1QyxDQUF2QyxHQUE4QyxDQUFDLENBQS9DLENBQWQ7RUFDWixFQUFBLENBQUcsQ0FBSDtFQUVBLElBQUEsQ0FBSyxDQUFDLENBQUMsQ0FBUCxFQUFVLENBQUMsQ0FBQyxDQUFaLEVBQWUsQ0FBQyxDQUFDLENBQUYsR0FBTSxHQUFyQixFQUEwQixDQUFDLENBQUMsQ0FBRixHQUFNLEdBQWhDO0VBQ0EsSUFBQSxDQUFLLENBQUMsQ0FBQyxDQUFQLEVBQVUsQ0FBQyxDQUFDLENBQVosRUFBZSxDQUFDLENBQUMsQ0FBRixHQUFNLEdBQXJCLEVBQTBCLENBQUMsQ0FBQyxDQUFGLEdBQU0sR0FBaEM7RUFFQSxJQUFHLENBQUMsQ0FBQyxDQUFGLEdBQU0sS0FBTixJQUFnQixDQUFBLEdBQUEsR0FBSSxNQUFKLFdBQWEsQ0FBQyxDQUFDLEVBQWYsUUFBQSxHQUFtQixHQUFBLEdBQUksTUFBdkIsQ0FBbkI7QUFBc0QsV0FBTyxZQUFBLENBQWEsQ0FBYixFQUFnQixJQUFoQixFQUE3RDs7RUFDQSxJQUFHLENBQUMsQ0FBQyxDQUFGLEdBQU0sQ0FBTixJQUFXLENBQUMsQ0FBQyxDQUFGLEdBQU0sTUFBakIsSUFBMkIsQ0FBQyxDQUFDLENBQUYsR0FBTSxLQUFwQztBQUErQyxXQUFPLFlBQUEsQ0FBYSxDQUFiLEVBQWdCLEtBQWhCLEVBQXREOztBQUNBO0VBQUEsS0FBQSx3Q0FBQTtJQUFJLENBQUMsQ0FBRCxFQUFHLENBQUg7SUFDSCxJQUFHLENBQUMsQ0FBQyxLQUFGLEdBQVUsSUFBQSxDQUFLLENBQUMsQ0FBQyxDQUFQLEVBQVMsQ0FBQyxDQUFDLENBQVgsRUFBYyxDQUFkLEVBQWdCLENBQWhCLENBQWI7QUFBb0MsYUFBTyxZQUFBLENBQWEsQ0FBYixFQUFnQixLQUFoQixFQUEzQzs7RUFERDtBQXRCTTs7QUF5QlAsS0FBQSxHQUFRLFFBQUEsQ0FBQSxDQUFBO0VBQ1AsWUFBQSxDQUFhLFdBQWIsRUFBeUIsWUFBekI7RUFDQSxTQUFBLENBQVUsTUFBVixFQUFpQixNQUFqQjtFQUNBLFFBQUEsQ0FBUyxNQUFUO1NBQ0EsWUFBQSxDQUFhLENBQWIsRUFBZ0IsSUFBaEI7QUFKTyIsInNvdXJjZXNDb250ZW50IjpbInRvdWNoaW5nID0gZmFsc2VcclxudG91Y2hTdGFydGVkID0gLT4gdG91Y2hpbmcgPSB0cnVlOyBmYWxzZVxyXG50b3VjaEVuZGVkID0gLT4gdG91Y2hpbmcgPSBmYWxzZTsgZmFsc2VcclxubW91c2VSZWxlYXNlZCA9IC0+IHRvdWNoaW5nID0gZmFsc2VcclxuXHJcblMgPSB7eDowLCB5OjAsIGxldmVsOjAsIGQ6NTAsIHN0YXJzOltdfVxyXG5cclxuc3RhcnROZXdHYW1lID0gKGRsZXZlbCwgcmFuZCA9IGZhbHNlKSAtPlxyXG5cdGlmIHJhbmQgdGhlbiBTLnN0YXJzID0gcmFuZ2UoaGVpZ2h0KndpZHRoL1MuZC9TLmQpLm1hcCgoaSkgLT4gW3dpZHRoKnJhbmRvbSgpLCBoZWlnaHQqcmFuZG9tKCldKVxyXG5cdE9iamVjdC5hc3NpZ24gUyx7bGV2ZWw6Uy5sZXZlbCtkbGV2ZWwsIHg6MCwgeTpoZWlnaHQvMn1cclxuXHRcclxuZHJhdyA9IC0+XHJcblx0YmcgMC41XHJcblxyXG5cdGZpbGwgJ3JlZCdcclxuXHRzYygpXHJcblx0dGV4dCBTLmxldmVsLCB3aWR0aC8yLCBoZWlnaHQvMlxyXG5cclxuXHRmaWxsICd5ZWxsb3cnXHJcblx0Y2lyY2xlIHgseSxTLmxldmVsIGZvciBbeCx5XSBpbiBTLnN0YXJzIFxyXG5cclxuXHRyZWN0IHdpZHRoLTMsMC40KmhlaWdodCwyLDAuMipoZWlnaHRcclxuXHJcblx0aWYgbW91c2VJc1ByZXNzZWQgYW5kIDAuMSpoZWlnaHQgPiBkaXN0IG1vdXNlWCxtb3VzZVksIDAsMCB0aGVuIHN0YXJ0TmV3R2FtZSAwLHRydWVcclxuXHRcclxuXHRbUy54LFMueV0gPSBbUy54KzEsIFMueSArIGlmIG1vdXNlSXNQcmVzc2VkIG9yIGtleUlzRG93biAzMiB0aGVuIDEgZWxzZSAtMV1cclxuXHRzYyAwXHJcblxyXG5cdGxpbmUgUy54LCBTLnksIFMueCArIDUwMCwgUy55ICsgNTAwXHJcblx0bGluZSBTLngsIFMueSwgUy54ICsgNTAwLCBTLnkgLSA1MDBcclxuXHJcblx0aWYgUy54ID4gd2lkdGggYW5kIDAuNCpoZWlnaHQgPCBTLnkgPCAwLjYqaGVpZ2h0IHRoZW4gcmV0dXJuIHN0YXJ0TmV3R2FtZSAxLCB0cnVlXHJcblx0aWYgUy55IDwgMCBvciBTLnkgPiBoZWlnaHQgb3IgUy54ID4gd2lkdGggdGhlbiByZXR1cm4gc3RhcnROZXdHYW1lIDAsIGZhbHNlXHJcblx0Zm9yIFt4LHldIGluIFMuc3RhcnNcclxuXHRcdGlmIFMubGV2ZWwgPiBkaXN0IFMueCxTLnksIHgseSB0aGVuIHJldHVybiBzdGFydE5ld0dhbWUgMCwgZmFsc2VcclxuXHJcbnNldHVwID0gLT5cclxuXHRjcmVhdGVDYW52YXMgd2luZG93V2lkdGgsd2luZG93SGVpZ2h0XHJcblx0dGV4dEFsaWduIENFTlRFUixDRU5URVJcclxuXHR0ZXh0U2l6ZSBoZWlnaHRcclxuXHRzdGFydE5ld0dhbWUgMSwgdHJ1ZVxyXG4iXX0=
//# sourceURL=c:\github\StarDodge\sketch.coffee